<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Axo Engine Portfolio 2.0</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html, body {
  margin: 0;
  height: 100%;
  overflow-x: hidden;
  font-family: system-ui, sans-serif;
  background: #0b0d12;
  color: white;
  scroll-behavior: smooth;
}
section {
  min-height: 100vh;
  padding: 120px 10vw;
  opacity: 0;
  transform: translateY(40px);
  transition: all 0.8s ease-out;
}
section.visible {
  opacity: 1;
  transform: translateY(0);
}
h1, h2 {
  margin: 0 0 20px 0;
}
h1 { font-size: clamp(3rem, 6vw, 6rem);}
h2 { font-size: clamp(2rem, 5vw, 3rem);}
p {
  max-width: 600px;
  line-height: 1.6;
  opacity: 0.85;
}
.glass {
  backdrop-filter: blur(20px);
  background: rgba(255,255,255,0.08);
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.4);
  transition: all 0.5s ease;
  position: relative;
}

/* GUI PANEL */
#guiPanel {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 1000;
}
#guiPanel button {
  font-size: 0.85rem;
  padding: 12px 18px;
  border-radius: 12px;
  border: none;
  cursor: pointer;
  background: linear-gradient(135deg,#5effff,#8a5eff);
  color: black;
  font-weight: bold;
  transition: all 0.2s ease;
}
#guiPanel button:hover {
  transform: scale(1.1);
}

/* CANVAS */
#engineCanvas {
  width: 100%;
  height: 500px;
  display: block;
  border-radius: 16px;
  background: black;
  margin-top: 20px;
}

/* PARTICLES */
.particle {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #5effff;
  pointer-events: none;
  opacity: 0.8;
  transform: translate(-50%, -50%);
  transition: opacity 0.5s ease;
}

/* RETRO MODE */
.retro body {
  background: #000020;
  color: #00ffcc;
  font-family: "Courier New", monospace;
}
.retro .glass {
  background: rgba(0,0,0,0.8);
  border: 2px solid #00ffcc;
  box-shadow: none;
}
.scanlines {
  pointer-events: none;
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,0.03),
    rgba(255,255,255,0.03) 1px,
    transparent 1px,
    transparent 3px
  );
  mix-blend-mode: overlay;
  opacity: 0;
  transition: opacity 0.5s ease;
}
.retro .scanlines {opacity:1;}

/* DRAGGABLE WINDOWS */
.window {
  position: absolute;
  background: rgba(20,20,30,0.9);
  border-radius: 12px;
  padding: 12px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.6);
  cursor: grab;
  overflow: hidden;
  touch-action: none;
  transition: box-shadow 0.2s ease;
}
.window:active {
  cursor: grabbing;
  box-shadow: 0 12px 40px rgba(0,0,0,0.8);
}
.window h3 {
  margin: 0 0 6px 0;
  font-size: 1.1rem;
}
.window p {
  margin: 0;
  font-size: 0.9rem;
}
</style>
</head>

<body>
<div class="scanlines"></div>

<!-- GUI PANEL -->
<div id="guiPanel">
  <button id="timeBtn">Time Travel</button>
  <button id="particleBtn">Particles: ON</button>
  <button id="resetCubeBtn">Reset Cubes</button>
</div>

<!-- SECTIONS -->
<section>
  <h1>Axo Engine Portfolio</h1>
  <p>Welcome! Scroll down to explore interactive 3D demos, physics windows, and cutting-edge web experiences.</p>
</section>

<section>
  <div class="glass">
    <h2>Interactive 3D Engine Demo</h2>
    <p>Multiple 3D objects rendered using raw WebGL. Drag windows, toggle modes, and explore physics interactions!</p>
    <canvas id="engineCanvas"></canvas>
  </div>
</section>

<section>
  <h2>Draggable Windows</h2>
  <p>These panels are physics-driven and draggable. You can move them anywhere on the page.</p>
</section>

<section>
  <h2>About Me</h2>
  <p>I specialize in pushing the web to its limits: real-time 3D, physics, particles, and interactive experiences.</p>
</section>

<script>
// ----------------- SECTION REVEAL -----------------
const sections = document.querySelectorAll("section");
const observer = new IntersectionObserver((entries)=>{
  entries.forEach(e=>{
    if(e.isIntersecting) e.target.classList.add("visible");
  });
},{threshold:0.2});
sections.forEach(sec=>observer.observe(sec));

// ----------------- PARTICLES -----------------
let particlesEnabled = true;
let particles = [];
function spawnParticle(x,y){
  if(!particlesEnabled) return;
  const p = document.createElement("div");
  p.className="particle";
  p.style.left=x+"px";
  p.style.top=y+"px";
  document.body.appendChild(p);
  particles.push({el:p,life:1});
}
function updateParticles(){
  for(let i=particles.length-1;i>=0;i--){
    let p=particles[i];
    p.life-=0.02;
    p.el.style.opacity=p.life;
    if(p.life<=0){p.el.remove();particles.splice(i,1);}
  }
}
document.addEventListener("mousemove", e=>spawnParticle(e.clientX,e.clientY));
document.addEventListener("touchmove", e=>{
  const t = e.touches[0];
  spawnParticle(t.clientX,t.clientY);
},{passive:false});

// ----------------- RAW WEBGL SETUP -----------------
const canvas = document.getElementById("engineCanvas");
const gl = canvas.getContext("webgl");
let cw=canvas.clientWidth;
let ch=canvas.clientHeight;
function resizeCanvas(){
  cw=canvas.clientWidth;
  ch=canvas.clientHeight;
  canvas.width=cw;
  canvas.height=ch;
  gl.viewport(0,0,cw,ch);
}
resizeCanvas();
window.addEventListener("resize",resizeCanvas);

// ----------------- SHADERS -----------------
const vertexShaderSrc = `
attribute vec3 position;
uniform mat4 uModel;
uniform mat4 uView;
uniform mat4 uProjection;
void main(){
  gl_Position=uProjection*uView*uModel*vec4(position,1.0);
}`;
const fragmentShaderSrc = `
precision mediump float;
uniform vec3 uColor;
void main(){
  gl_FragColor=vec4(uColor,1.0);
}`;
function compileShader(src,type){
  const s=gl.createShader(type);
  gl.shaderSource(s,src);
  gl.compileShader(s);
  if(!gl.getShaderParameter(s,gl.COMPILE_STATUS)) console.error(gl.getShaderInfoLog(s));
  return s;
}
const vertShader=compileShader(vertexShaderSrc,gl.VERTEX_SHADER);
const fragShader=compileShader(fragmentShaderSrc,gl.FRAGMENT_SHADER);
const program=gl.createProgram();
gl.attachShader(program,vertShader);
gl.attachShader(program,fragShader);
gl.linkProgram(program);
gl.useProgram(program);

// ----------------- 3D CUBE DATA -----------------
const cubeVertices=new Float32Array([
  -1,-1,-1, 1,-1,-1, 1,1,-1, -1,1,-1,
  -1,-1,1, 1,-1,1, 1,1,1, -1,1,1
]);
const cubeIndices=new Uint16Array([
  0,1,1,2,2,3,3,0, 4,5,5,6,6,7,7,4,
  0,4,1,5,2,6,3,7
]);
const vbo=gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER,cubeVertices);
gl.bufferData(gl.ARRAY_BUFFER,cubeVertices,gl.STATIC_DRAW);
const ibo=gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,cubeIndices);
gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,cubeIndices,gl.STATIC_DRAW);
const posAttrib=gl.getAttribLocation(program,"position");
gl.enableVertexAttribArray(posAttrib);
gl.vertexAttribPointer(posAttrib,3,gl.FLOAT,false,0,0);

// ----------------- UNIFORMS -----------------
const uModelLoc=gl.getUniformLocation(program,"uModel");
const uViewLoc=gl.getUniformLocation(program,"uView");
const uProjLoc=gl.getUniformLocation(program,"uProjection");
const uColorLoc=gl.getUniformLocation(program,"uColor");

// ----------------- BASIC MATRIX HELPERS -----------------
function perspective(fov,aspect,near,far){
  const f=1/Math.tan(fov/2);
  const nf=1/(near-far);
  return [
    f/aspect,0,0,0,
    0,f,0,0,
    0,0,(far+near)*nf,-1,
    0,0,2*far*near*nf,0
  ];
}
function identity(){return [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];}
function translate(m,v){
  const t=identity();
  t[12]=v[0]; t[13]=v[1]; t[14]=v[2];
  return multiply(m,t);
}
function rotateY(m,a){
  const r=identity();
  r[0]=Math.cos(a); r[2]=Math.sin(a);
  r[8]=-Math.sin(a); r[10]=Math.cos(a);
  return multiply(m,r);
}
function rotateX(m,a){
  const r=identity();
  r[5]=Math.cos(a); r[6]=-Math.sin(a);
  r[9]=Math.sin(a); r[10]=Math.cos(a);
  return multiply(m,r);
}
function multiply(a,b){
  const o=new Array(16).fill(0);
  for(let i=0;i<4;i++)
    for(let j=0;j<4;j++)
      for(let k=0;k<4;k++)
        o[i*4+j]+=a[i*4+k]*b[k*4+j];
  return o;
}

// ----------------- CAMERA -----------------
const cameraPos=[0,0,6];
const viewMat=translate(identity(),[-cameraPos[0],-cameraPos[1],-cameraPos[2]]);
const projMat=perspective(Math.PI/4,cw/ch,0.1,100);

// ----------------- MULTIPLE CUBES -----------------
let cubes=[
  {pos:[-2,0,0],rot:[0,0,0],color:[1,0.3,0.3]},
  {pos:[2,0,0],rot:[0,0,0],color:[0.3,1,0.3]},
  {pos:[0,2,0],rot:[0,0,0],color:[0.3,0.3,1]}
];

// ----------------- DRAGGABLE WINDOWS -----------------
let windows=[];
for(let i=0;i<2;i++){
  const w=document.createElement("div");
  w.className="window";
  w.style.width="200px"; w.style.height="100px";
  w.style.left=(50+i*220)+"px"; w.style.top="50px";
  w.innerHTML=`<h3>Window ${i+1}</h3><p>Drag me!</p>`;
  document.body.appendChild(w);
  windows.push({el:w,x:parseInt(w.style.left),y:parseInt(w.style.top),drag:false});
}

windows.forEach(win=>{
  win.el.addEventListener("mousedown", e=>{win.drag=true;win.offsetX=e.offsetX;win.offsetY=e.offsetY;});
  win.el.addEventListener("mouseup", e=>{win.drag=false;});
  win.el.addEventListener("mousemove", e=>{
    if(win.drag){
      win.x=e.clientX-win.offsetX;
      win.y=e.clientY-win.offsetY;
      win.el.style.left=win.x+"px";
      win.el.style.top=win.y+"px";
    }
  });
});

// ----------------- GUI -----------------
document.getElementById("timeBtn").onclick=()=>{
  document.documentElement.classList.toggle("retro");
};
document.getElementById("particleBtn").onclick=e=>{
  particlesEnabled=!particlesEnabled;
  e.target.textContent="Particles: "+(particlesEnabled?"ON":"OFF");
};
document.getElementById("resetCubeBtn").onclick=()=>{
  cubes.forEach(c=>{c.rot=[0,0,0];});
};

// ----------------- RENDER LOOP -----------------
let t=0;
function render(){
  t+=0.01;
  gl.clearColor(0,0,0,1);
  gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);
  gl.enable(gl.DEPTH_TEST);

  cubes.forEach(c=>{
    c.rot[0]+=0.01; c.rot[1]+=0.02;
    let model=identity();
    model=translate(model,c.pos);
    model=rotateX(model,c.rot[0]);
    model=rotateY(model,c.rot[1]);
    gl.uniformMatrix4fv(uModelLoc,false,new Float32Array(model));
    gl.uniformMatrix4fv(uViewLoc,false,new Float32Array(viewMat));
    gl.uniformMatrix4fv(uProjLoc,false,new Float32Array(projMat));
    gl.uniform3fv(uColorLoc,new Float32Array(c.color));
    gl.drawElements(gl.LINES,cubeIndices.length,gl.UNSIGNED_SHORT,0);
  });

  updateParticles();
  requestAnimationFrame(render);
}
render();
</script>
</body>
</html>
